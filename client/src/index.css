@import "./themes/default.css";
@import "./themes/fonts.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    font-family:
      "Rubik One",
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      Roboto,
      "Helvetica Neue",
      Arial,
      sans-serif;
  }
}

.font-pixel-game {
  font-family: "Pixel Game", "Rubik One", sans-serif !important;
}

#root {
  overflow: hidden;
  height: 100%;
  min-height: 100vh;
  min-height: 100svh;
  min-height: 100dvh;
  width: 100%;
  background-color: var(--black-100);
}

html,
body {
  overflow: hidden;
  touch-action: manipulation;
  height: 100%;
  min-height: 100vh;
  min-height: 100svh;
  min-height: 100dvh;
  width: 100%;
  background-color: var(
    --safe-area-bottom,
    var(--safe-area-top, var(--black-100))
  );
}

.safe-area-bar {
  position: fixed;
  left: 0;
  right: 0;
  pointer-events: none;
  z-index: 9999;
}

.safe-area-top {
  top: 0;
  height: var(--safe-area-top-fallback, 0px);
  background: var(--safe-area-top, var(--black-100));
}

.safe-area-bottom {
  bottom: 0;
  height: var(--safe-area-bottom-fallback, 0px);
  background: var(--safe-area-bottom, var(--black-100));
}

@supports (height: max(0px, 0px)) {
  .safe-area-top {
    height: max(
      env(safe-area-inset-top, 0px),
      var(--safe-area-top-fallback, 0px)
    );
  }

  .safe-area-bottom {
    height: max(
      env(safe-area-inset-bottom, 0px),
      var(--safe-area-bottom-fallback, 0px)
    );
  }
}

/* Puller orb rotation animation - CSS for Safari compatibility */
@keyframes puller-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@-webkit-keyframes puller-spin {
  from {
    -webkit-transform: rotate(0deg);
  }
  to {
    -webkit-transform: rotate(360deg);
  }
}

/* Chromatic aberration glitch effect â€” three bursts across a 2.5s cycle */
@keyframes glitch-shift {
  0%, 8%, 30%, 38%, 68%, 76%, 100% {
    transform: translate(0, 0);
  }
  /* Burst 1 */
  2% { transform: translate(3px, -1px); }
  4% { transform: translate(-3px, 1px); }
  6% { transform: translate(2px, 2px); }
  /* Burst 2 */
  32% { transform: translate(-2px, -1px); }
  34% { transform: translate(3px, 1px); }
  36% { transform: translate(-1px, -2px); }
  /* Burst 3 */
  70% { transform: translate(2px, 1px); }
  72% { transform: translate(-3px, -1px); }
  74% { transform: translate(1px, 2px); }
}

@keyframes glitch-red {
  0%, 8%, 30%, 38%, 68%, 76%, 100% {
    clip-path: inset(0 0 0 0);
    transform: translate(0, 0);
  }
  2% { clip-path: inset(20% 0 40% 0); transform: translate(-4px, 0); }
  4% { clip-path: inset(60% 0 10% 0); transform: translate(4px, 0); }
  6% { clip-path: inset(10% 0 70% 0); transform: translate(-3px, 0); }
  32% { clip-path: inset(40% 0 20% 0); transform: translate(3px, 0); }
  34% { clip-path: inset(5% 0 55% 0); transform: translate(-4px, 0); }
  36% { clip-path: inset(70% 0 10% 0); transform: translate(3px, 0); }
  70% { clip-path: inset(15% 0 50% 0); transform: translate(-3px, 0); }
  72% { clip-path: inset(50% 0 15% 0); transform: translate(4px, 0); }
  74% { clip-path: inset(30% 0 40% 0); transform: translate(-3px, 0); }
}

@keyframes glitch-blue {
  0%, 8%, 30%, 38%, 68%, 76%, 100% {
    clip-path: inset(0 0 0 0);
    transform: translate(0, 0);
  }
  2% { clip-path: inset(50% 0 20% 0); transform: translate(4px, 0); }
  4% { clip-path: inset(10% 0 60% 0); transform: translate(-4px, 0); }
  6% { clip-path: inset(40% 0 30% 0); transform: translate(3px, 0); }
  32% { clip-path: inset(25% 0 45% 0); transform: translate(-3px, 0); }
  34% { clip-path: inset(65% 0 5% 0); transform: translate(4px, 0); }
  36% { clip-path: inset(10% 0 65% 0); transform: translate(-3px, 0); }
  70% { clip-path: inset(45% 0 25% 0); transform: translate(3px, 0); }
  72% { clip-path: inset(5% 0 60% 0); transform: translate(-4px, 0); }
  74% { clip-path: inset(60% 0 15% 0); transform: translate(3px, 0); }
}

.glitch-effect {
  position: relative;
}

.glitch-effect > * {
  position: relative;
  z-index: 1;
}

.glitch-effect::before,
.glitch-effect::after {
  content: "";
  position: absolute;
  inset: -2px;
  z-index: 0;
  pointer-events: none;
  mix-blend-mode: screen;
}

.glitch-effect::before {
  background: inherit;
  filter: drop-shadow(0 0 0 rgba(255, 0, 50, 0.7));
  opacity: 0;
  animation: glitch-red 2.5s infinite linear;
}

.glitch-effect::after {
  background: inherit;
  filter: drop-shadow(0 0 0 rgba(0, 100, 255, 0.7));
  opacity: 0;
  animation: glitch-blue 2.5s infinite linear 0.05s;
}

@keyframes glitch-opacity {
  0%, 8%, 30%, 38%, 68%, 76%, 100% {
    opacity: 0;
  }
  2%, 4%, 6% { opacity: 1; }
  32%, 34%, 36% { opacity: 1; }
  70%, 72%, 74% { opacity: 1; }
}

.glitch-effect::before,
.glitch-effect::after {
  animation:
    glitch-red 2.5s infinite linear,
    glitch-opacity 2.5s infinite linear;
}

.glitch-effect::after {
  animation:
    glitch-blue 2.5s infinite linear 0.05s,
    glitch-opacity 2.5s infinite linear 0.05s;
}

/* Text-based glitch using text-shadow for inline text */
@keyframes glitch-text {
  0%, 8%, 30%, 38%, 68%, 76%, 100% {
    text-shadow: none;
  }
  /* Burst 1 */
  2% { text-shadow: -4px 0 rgba(255, 0, 50, 0.8), 4px 0 rgba(0, 100, 255, 0.8); }
  4% { text-shadow: 3px 0 rgba(255, 0, 50, 0.8), -3px 0 rgba(0, 100, 255, 0.8); }
  6% { text-shadow: -3px 0 rgba(255, 0, 50, 0.7), 3px 0 rgba(0, 100, 255, 0.7); }
  /* Burst 2 */
  32% { text-shadow: 4px 0 rgba(255, 0, 50, 0.8), -4px 0 rgba(0, 100, 255, 0.8); }
  34% { text-shadow: -3px 0 rgba(255, 0, 50, 0.7), 3px 0 rgba(0, 100, 255, 0.7); }
  36% { text-shadow: 3px 0 rgba(255, 0, 50, 0.8), -3px 0 rgba(0, 100, 255, 0.8); }
  /* Burst 3 */
  70% { text-shadow: -3px 0 rgba(255, 0, 50, 0.8), 3px 0 rgba(0, 100, 255, 0.8); }
  72% { text-shadow: 4px 0 rgba(255, 0, 50, 0.7), -4px 0 rgba(0, 100, 255, 0.7); }
  74% { text-shadow: -4px 0 rgba(255, 0, 50, 0.8), 4px 0 rgba(0, 100, 255, 0.8); }
}

.glitch-text {
  animation: glitch-text 2.5s infinite linear;
}

/* Icon/SVG glitch using filter drop-shadows */
@keyframes glitch-icon-anim {
  0%, 8%, 30%, 38%, 68%, 76%, 100% {
    filter: drop-shadow(0 0 0 transparent) drop-shadow(0 0 0 transparent);
  }
  /* Burst 1 */
  2% { filter: drop-shadow(-4px 0 0 rgba(255, 0, 50, 0.8)) drop-shadow(4px 0 0 rgba(0, 100, 255, 0.8)); }
  3% { filter: drop-shadow(3px 0 0 rgba(255, 0, 50, 0.6)) drop-shadow(-3px 0 0 rgba(0, 100, 255, 0.6)); }
  4% { filter: drop-shadow(-3px 1px 0 rgba(255, 0, 50, 0.8)) drop-shadow(3px -1px 0 rgba(0, 100, 255, 0.8)); }
  6% { filter: drop-shadow(3px 0 0 rgba(255, 0, 50, 0.7)) drop-shadow(-4px 0 0 rgba(0, 100, 255, 0.7)); }
  /* Burst 2 */
  32% { filter: drop-shadow(4px 0 0 rgba(255, 0, 50, 0.8)) drop-shadow(-4px 0 0 rgba(0, 100, 255, 0.8)); }
  33% { filter: drop-shadow(-3px -1px 0 rgba(255, 0, 50, 0.6)) drop-shadow(3px 1px 0 rgba(0, 100, 255, 0.6)); }
  34% { filter: drop-shadow(3px 0 0 rgba(255, 0, 50, 0.8)) drop-shadow(-3px 0 0 rgba(0, 100, 255, 0.8)); }
  36% { filter: drop-shadow(-4px 1px 0 rgba(255, 0, 50, 0.7)) drop-shadow(4px -1px 0 rgba(0, 100, 255, 0.7)); }
  /* Burst 3 */
  70% { filter: drop-shadow(-3px 0 0 rgba(255, 0, 50, 0.8)) drop-shadow(3px 0 0 rgba(0, 100, 255, 0.8)); }
  71% { filter: drop-shadow(4px 1px 0 rgba(255, 0, 50, 0.6)) drop-shadow(-3px -1px 0 rgba(0, 100, 255, 0.6)); }
  72% { filter: drop-shadow(-4px 0 0 rgba(255, 0, 50, 0.8)) drop-shadow(4px 0 0 rgba(0, 100, 255, 0.8)); }
  74% { filter: drop-shadow(3px -1px 0 rgba(255, 0, 50, 0.7)) drop-shadow(-4px 1px 0 rgba(0, 100, 255, 0.7)); }
}

.glitch-icon {
  animation: glitch-icon-anim 2.5s infinite linear;
}
